<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flight Briefing Generator</title>

  <!-- Leaflet (map) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <style>
    :root{
      --brand:#e24b4b;
      --ink:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --bg:#f7f7f8;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;background:var(--bg);color:var(--ink)}
    .app{display:grid;grid-template-columns:380px 1fr;gap:16px;min-height:100vh}
    aside{background:#fff;border-right:1px solid var(--line);padding:18px 16px 120px;overflow:auto}
    main{padding:18px;overflow:auto}
    h1{font-size:18px;margin:0 0 12px}
    fieldset{border:1px solid var(--line);border-radius:10px;margin:10px 0;padding:10px}
    legend{padding:0 6px;font-weight:700}
    h2{font-size:13px;margin:18px 0 8px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em}
    label{font-size:12px;color:var(--muted);display:block;margin:10px 0 6px}
    input,textarea,select{width:100%;border:1px solid var(--line);border-radius:8px;padding:9px 10px;font-size:13px;background:#fff;color:var(--ink)}
    textarea{min-height:72px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);background:#fff;border-radius:10px;padding:10px 12px;font-size:13px;cursor:pointer}
    .btn.primary{background:var(--brand);color:#fff;border-color:var(--brand)}
    .controls{position:sticky;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(247,247,248,0),#fff 30%);padding:12px 0 14px;display:flex;gap:8px}

    /* Printable page */
    .page{width:794px;min-height:1123px;background:#fff;margin:0 auto;border:1px solid var(--line);box-shadow:0 6px 24px rgba(0,0,0,.05)}
    .pb{padding:28px 28px 36px}
    .topbar{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}
    .brandbox{display:flex;flex-direction:column;gap:6px}
    .brandbox img{
      max-height:100px;       /* logo maior */
      object-fit:contain;
    }
    .slogan{font-size:10px;color:var(--muted);letter-spacing:.06em}
    .title{
      font-weight:800;
      color:#14143B;         /* cor solicitada */
      font-size:18px;
      margin-top:12px;
    }
    .grid{width:100%;border-collapse:collapse;font-size:12px}
    .grid th,.grid td{border-bottom:1px solid var(--line);padding:8px 10px;text-align:left;vertical-align:top}
    .grid th{color:var(--muted);font-weight:600}
    .section{margin-top:18px}
    .section h3{font-size:13px;margin:0 0 6px;color:var(--muted);text-transform:uppercase;letter-spacing:.06em}
    .aircraft-pics{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin-top:8px}
    .aircraft-pics img{width:100%;height:120px;object-fit:cover;border-radius:6px;border:1px solid var(--line)}
    .contact-table td:nth-child(3), .contact-table td:nth-child(2){color:var(--brand)}
    .handling-table td:nth-child(4){white-space:nowrap}

    /* Route map */
    #routeMap{width:100%;height:260px;border:1px solid var(--line);border-radius:10px}
    .route-hint{font-size:11px;color:var(--muted);margin-top:4px}

    @media print{
      @page{size:A4;margin:10mm}
      body{background:#fff}
      .app{display:block}
      aside{display:none}
      main{padding:0}
      .page{width:auto;min-height:auto;border:none;box-shadow:none}
      #routeMap{height:240px}
      .brandbox img{max-height:80px;} /* maior na impressão */
    }
  </style>
</head>
<body>
  <div class="app">
    <aside>
      <h1>Configurar Flight Briefing</h1>

      <fieldset>
        <legend><strong>Marca</strong></legend>
        <label>Slogan
          <input id="slogan" placeholder="DEMAND THE SERVICE YOU DESERVE" />
        </label>
        <label>Nome da Empresa
          <input id="company" placeholder="Poit Aviation" />
        </label>
      </fieldset>

      <fieldset>
        <legend><strong>Dados do Voo</strong></legend>
        <div class="row">
          <div>
            <label>Data</label>
            <input id="date" type="date" />
          </div>
          <div>
            <label>Horário (LT) Partida</label>
            <input id="departLT" type="time" />
          </div>
        </div>
        <div class="row">
          <div>
            <label>De (ICAO)</label>
            <input id="fromIcao" placeholder="ICAO" />
          </div>
          <div>
            <label>Para (ICAO)</label>
            <input id="toIcao" placeholder="ICAO" />
          </div>
        </div>
        <label>Origem – Nome completo do aeroporto / cidade</label>
        <input id="fromName" placeholder="From" />
        <label>Destino – Nome completo do aeroporto / cidade</label>
        <input id="toName" placeholder="To" />
        <div class="row">
          <div>
            <label>PAX</label>
            <input id="pax" type="number" min="0" placeholder="0" />
          </div>
          <div>
            <label>Tempo de Voo (hh:mm)</label>
            <input id="flightTime" placeholder="00:00" />
          </div>
        </div>
        <div class="row">
          <div>
            <label>Chegada (LT)</label>
            <input id="arriveLT" type="time" />
          </div>
          <div>
            <label>Nº do Voo</label>
            <input id="flightNo" placeholder="N/A" />
          </div>
        </div>
      </fieldset>

      <fieldset>
        <legend><strong>Previsão do tempo (Destino)</strong></legend>
        <label>Cidade/Local do destino (edite se necessário)
          <input id="wxCity" placeholder="" />
        </label>
        <div class="row">
          <div>
            <label>Latitude (opcional)
              <input id="wxLat" placeholder="" />
            </label>
          </div>
          <div>
            <label>Longitude (opcional)
              <input id="wxLon" placeholder="" />
            </label>
          </div>
        </div>
        <button type="button" class="btn" id="wxUpdate">Atualizar previsão</button>
        <div id="wxStatus" style="font-size:12px;color:var(--muted);margin-top:6px"></div>
      </fieldset>

      <fieldset>
        <legend><strong>Aeronave</strong></legend>
        <label>Tipo</label>
        <input id="acType" placeholder="" />
        <label>Matrícula</label>
        <input id="acReg" placeholder="" />
        <label>Restrições / Observações</label>
        <textarea id="acRest" placeholder=""></textarea>
        <div class="row">
          <div>
            <label>Foto 1
              <input type="file" class="picInput" accept="image/*" data-pic="1" />
            </label>
          </div>
          <div>
            <label>Foto 2
              <input type="file" class="picInput" accept="image/*" data-pic="2" />
            </label>
          </div>
        </div>
        <label>Foto 3
          <input type="file" class="picInput" accept="image/*" data-pic="3" />
        </label>
      </fieldset>

      <fieldset>
        <legend><strong>Tripulação & Operador</strong></legend>
        <div id="crewWrap"></div>
        <button type="button" class="btn" id="addCrew">+ Adicionar contato</button>
      </fieldset>

      <fieldset>
        <legend><strong>Passageiros</strong></legend>
        <div id="paxWrap"></div>
        <button type="button" class="btn" id="addPax">+ Adicionar passageiro</button>
      </fieldset>

      <fieldset>
        <legend><strong>Handling Contacts</strong></legend>
        <div id="handWrap"></div>
        <button type="button" class="btn" id="addHand">+ Adicionar aeroporto</button>
      </fieldset>

      <fieldset>
        <legend><strong>Observações</strong></legend>
        <textarea id="generalNotes" placeholder="Adicione observações gerais aqui..."></textarea>
      </fieldset>

      <div class="controls">
        <button class="btn" id="resetBtn">Limpar</button>
        <button class="btn primary" id="printBtn">Baixar PDF</button>
      </div>
    </aside>

    <main>
      <div class="page" id="page">
        <div class="pb">
          <div class="topbar">
            <div class="brandbox">
              <img id="logo" alt="Logo" src="Logo.png" />
              <div class="slogan" id="sloganOut">DEMAND THE SERVICE YOU DESERVE</div>
            </div>
            <div>
              <div style="text-align:right;color:var(--muted);font-size:12px" id="companyOut">{{company}}</div>
              <div class="title">FLIGHT BRIEFING</div>
            </div>
          </div>

          <table class="grid">
            <thead>
              <tr>
                <th style="width:110px">Date</th>
                <th style="width:80px">Departing</th>
                <th>From</th>
                <th>To</th>
                <th style="width:50px">PAX</th>
                <th style="width:90px">Flight Time</th>
                <th style="width:90px">Arriving</th>
                <th style="width:90px">Flight No.</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td id="outDate"></td>
                <td id="outDepart"></td>
                <td><div id="outFromIcao" style="font-weight:600"></div><div id="outFromName" style="font-size:11px;color:var(--muted)"></div></td>
                <td><div id="outToIcao" style="font-weight:600"></div><div id="outToName" style="font-size:11px;color:var(--muted)"></div></td>
                <td id="outPax"></td>
                <td id="outFtime"></td>
                <td id="outArrive"></td>
                <td id="outFno"></td>
              </tr>
            </tbody>
          </table>

          <!-- ROUTE MAP -->
          <div class="section" id="routeSection">
            <h3>Route Map</h3>
            <div id="routeMap"></div>
            <div class="route-hint" id="routeHint">Preencha os campos “De (ICAO)” e “Para (ICAO)” para visualizar a rota.</div>
          </div>

          <!-- weather section (print) -->
          <div class="section">
            <h3>Destination Weather</h3>
            <table class="grid" id="wxTable">
              <tbody>
                <tr>
                  <th style="width:140px">Location</th>
                  <td id="outWxLoc">—</td>
                </tr>
                <tr>
                  <th>Date</th>
                  <td id="outWxDate">—</td>
                </tr>
                <tr>
                  <th>Forecast (daily)</th>
                  <td id="outWxSummary">—</td>
                </tr>
                <tr>
                  <th>Arrival window</th>
                  <td id="outWxArrival">—</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- aircraft section -->
          <div class="section">
            <h3>Aircraft</h3>
            <table class="grid">
              <tbody>
                <tr>
                  <th style="width:140px">Type</th>
                  <td id="outType"></td>
                </tr>
                <tr>
                  <th>Registration</th>
                  <td id="outReg"></td>
                </tr>
                <tr>
                  <th>Restrictions</th>
                  <td id="outRest"></td>
                </tr>
              </tbody>
            </table>
            <div class="aircraft-pics">
              <img id="pic1" alt="" />
              <img id="pic2" alt="" />
              <img id="pic3" alt="" />
            </div>
          </div>

          <!-- crew & operator -->
          <div class="section">
            <h3>Crew & Operator Contacts</h3>
            <table class="grid contact-table" id="crewTable">
              <thead>
                <tr>
                  <th style="width:160px">Role</th>
                  <th style="width:240px">Name</th>
                  <th>Phone</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <!-- General Informations (sempre página 2) -->
          <div class="section" id="notesSection">
            <h3>General Informations</h3>
            <div id="outGeneralNotes" style="white-space:pre-wrap;min-height:40px;color:#444;font-size:13px;background:#f7f7f8;border:1px solid #e5e7eb;border-radius:8px;padding:10px 12px;">—</div>
          </div>

          <!-- passengers -->
          <div class="section">
            <h3>Passengers</h3>
            <table class="grid" id="paxTable">
              <thead>
                <tr>
                  <th style="width:240px">Name</th>
                  <th style="width:180px">Passport</th>
                  <th style="width:140px">Expiration</th>
                  <th>Phone</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <!-- handling -->
          <div class="section">
            <h3>Handling contacts</h3>
            <table class="grid handling-table" id="handTable">
              <thead>
                <tr>
                  <th style="width:220px">AIRPORT</th>
                  <th>HANDLING</th>
                  <th style="width:260px">ADDRESS</th>
                  <th>PHONE</th>
                  <th>EMAIL</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

<script src="script.js"></script>
<script>
    // Sincroniza o campo de observações gerais com a visualização
    const generalNotes = document.getElementById('generalNotes');
    const outGeneralNotes = document.getElementById('outGeneralNotes');
    if (generalNotes && outGeneralNotes) {
      generalNotes.addEventListener('input', function() {
        outGeneralNotes.textContent = generalNotes.value || '—';
      });
      // Inicializa o valor ao carregar
      outGeneralNotes.textContent = generalNotes.value || '—';
    }
  </script>
</body>
</html>